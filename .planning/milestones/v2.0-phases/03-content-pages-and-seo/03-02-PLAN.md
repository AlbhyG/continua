---
phase: 03-content-pages-and-seo
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified: [src/components/layout/Header.tsx]
autonomous: true

must_haves:
  truths:
    - "Who navigation pill is greyed out and dropdown disabled when on /who page"
    - "What navigation pill is greyed out and dropdown disabled when on /what page"
    - "Navigation pills function normally on pages other than their target"
    - "All pages are statically generated at build time"
  artifacts:
    - path: "src/components/layout/Header.tsx"
      provides: "Active navigation state with usePathname()"
      contains: "usePathname"
  key_links:
    - from: "src/components/layout/Header.tsx"
      to: "next/navigation"
      via: "usePathname() hook import"
      pattern: "import.*usePathname.*from.*next/navigation"
---

<objective>
Add active navigation state to the Header component so the current page's navigation pill is greyed out with its dropdown disabled, and verify the complete build produces all static pages.

Purpose: Prevent confusing navigation (clicking Who while already on Who page) and satisfy WHO-03, WHAT-03 requirements.
Output: Header component with route-aware navigation styling and a verified static build.
</objective>

<execution_context>
@/Users/shantam/.claude/get-shit-done/workflows/execute-plan.md
@/Users/shantam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-content-pages-and-seo/03-01-SUMMARY.md
@.planning/phases/03-content-pages-and-seo/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add usePathname() active state logic to Header component</name>
  <files>src/components/layout/Header.tsx</files>
  <action>
Update the existing Header component to detect current route and apply greyed-out styling to the matching navigation pill.

1. Add import at top (after existing imports):
   - `import { usePathname } from 'next/navigation'`

2. Add route detection inside the component function, before the return:
   - `const pathname = usePathname()`
   - `const isWhoPage = pathname === '/who'`
   - `const isWhatPage = pathname === '/what'`

3. Update the Who Menu's MenuButton:
   - Add `disabled={isWhoPage}` prop
   - Change className to use template literal with conditional:
     ```
     className={`rounded-full bg-white/20 backdrop-blur px-4 py-1.5 text-sm font-bold text-white transition-colors ${
       isWhoPage ? 'opacity-50 cursor-default' : 'hover:bg-white/35'
     }`}
     ```
   - The `hover:bg-white/35` should ONLY apply when NOT on the Who page

4. Conditionally render Who MenuItems:
   - Wrap the existing `<MenuItems>` block for Who with `{!isWhoPage && (...)}`
   - This prevents the dropdown from rendering at all when disabled

5. Update the What Menu's MenuButton identically:
   - Add `disabled={isWhatPage}` prop
   - Change className with conditional: `isWhatPage ? 'opacity-50 cursor-default' : 'hover:bg-white/35'`

6. Conditionally render What MenuItems:
   - Wrap with `{!isWhatPage && (...)}`

7. Do NOT modify the Book dropdown or Sign In button. They have no active state.

8. The Header already has `'use client'` directive (required for usePathname hook). No change needed there.
  </action>
  <verify>Run `npm run build` and confirm all routes (`/`, `/who`, `/what`) build successfully as static pages. Run `npm run lint` to verify no TypeScript or ESLint errors.</verify>
  <done>Header component imports usePathname from next/navigation, detects /who and /what routes, applies opacity-50 cursor-default to matching pill, adds disabled prop to matching MenuButton, conditionally renders MenuItems only when pill is not active. Book dropdown and Sign In button unchanged.</done>
</task>

<task type="auto">
  <name>Task 2: Verify static generation and complete build</name>
  <files></files>
  <action>
Run a complete build to verify all Phase 3 requirements are met at the build level:

1. Run `npm run build` and capture output
2. Verify all three routes show static generation indicator (circle symbol):
   - `/` (Home)
   - `/who` (Who)
   - `/what` (What)
3. Run `npm run lint` and confirm zero errors
4. Verify no dynamic rendering indicators (lambda symbol) appear for these routes

This is a verification-only task. No files are modified. If build fails, fix issues in Header.tsx before proceeding.

Note: SEO-04 (Inter font without layout shift) was already completed in Phase 1 via next/font/google. No additional work needed.
  </action>
  <verify>Build output shows static indicators for all three page routes. Lint passes with zero errors.</verify>
  <done>All three routes (`/`, `/who`, `/what`) are statically generated at build time. No build errors. No lint errors. Phase 3 build verification complete.</done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds and shows static generation for `/`, `/who`, `/what`
2. `npm run lint` passes with zero errors
3. Header shows greyed-out Who pill with disabled dropdown on /who route
4. Header shows greyed-out What pill with disabled dropdown on /what route
5. Header navigation functions normally on / (home) route
6. Book dropdown and Sign In button unaffected by active state logic
</verification>

<success_criteria>
- usePathname() imported and used in Header component
- Who pill greyed out (opacity-50 cursor-default) and dropdown disabled on /who
- What pill greyed out (opacity-50 cursor-default) and dropdown disabled on /what
- All three pages statically generated at build time (SEO-03)
- Build and lint pass with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-pages-and-seo/03-02-SUMMARY.md`
</output>
